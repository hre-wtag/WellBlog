@defer () {<app-header />}
<div class="row m-0 p-4">
  <div class="col-12">
    <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <div class="row">
        <div class="col-md-5 mx-auto border p-3 bg-light rounded">
          <h3 class="text-center color-primary">Register</h3>
          <app-input
            [fieldlabel]="'First Name'"
            [fieldName]="'firstname'"
            [fieldType]="'text'"
            [fControl]="getFormControl(registerForm, 'firstname')"
          />
          <app-input
            [fieldlabel]="'Last Name'"
            [fieldName]="'lastname'"
            [fieldType]="'text'"
            [fControl]="getFormControl(registerForm, 'lastname')"
          />
          <app-input
            [fieldlabel]="'Email'"
            [fieldName]="'email'"
            [fieldType]="'email'"
            [fControl]="getFormControl(registerForm, 'email')"
          />
          <app-input
            [fieldlabel]="'Username'"
            [fieldName]="'username'"
            [fieldType]="'text'"
            [fControl]="getFormControl(registerForm, 'username')"
          />
          <app-input
            [fieldlabel]="'Password'"
            [fieldName]="'password'"
            [fieldType]="'password'"
            [fControl]="getFormControl(registerForm, 'password')"
            (input)="matchPassword()"
          />
          <app-input
            [fieldlabel]="'Confirm Password'"
            [fieldName]="'confirmPassword'"
            [fieldType]="'password'"
            [passwordMatched]="passMatched"
            [fControl]="getFormControl(registerForm, 'confirmPassword')"
            (input)="matchPassword()"
          />
          @if( confirmPasswordError &&
          registerForm.get('confirmPassword')?.touched &&
          registerForm.get('confirmPassword')?.valid ){
          <div class="text-danger mb-3">
            {{ confirmPasswordError }}
          </div>
          }
          <div class="d-flex align-items-center">
            <app-button
              [btnLabel]="'Register'"
              [btnType]="'submit'"
              [classes]="'background-primary'"
              [isDisabled]="!registerForm.valid || !passMatched"
            />
            <span class="text-muted fs-3 p-1">|</span>
            <app-button
              [btnLabel]="'Login'"
              [btnType]="'button'"
              [classes]="'btn-login'"
              [isDisabled]="false"
              (clickEvent)="onLogin()"
            />
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="container bg-light px-5 py-4 my-4 border">
  <form [formGroup]="addBlogForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col mb-3">
        <label class="form-label">Title</label>
        <input
          type="text"
          class="form-control form-input"
          formControlName="title"
          (blur)="onTouched('title')"
          [ngClass]="{
            'border-danger':
              !addBlogForm.get('title')?.valid &&
              addBlogForm.get('title')?.touched
          }"
        />
        @if (!addBlogForm.get('title')?.valid &&
        addBlogForm.get('title')?.touched){
        <div class="text-danger">This field is required.</div>
        }
      </div>
      <div class="col mb-3">
        <label class="form-label">Tags</label>
        <div class="dropdown">
          @if(!nothingIsChecked){
          <span
            class="dropdown-toggle form-control form-input select-tag"
            (click)="checkDropdown(!showDropdown)"
          >
            Select at least one tag </span
          >} @else{
          <span class="form-control form-input"
            >@for(selectedTag of tagList; track selectedTag) {
            @if(selectedTag.isChecked){<span
              class="selectedTag position-relative border m-1 p-1"
            >
              {{ selectedTag.title }}
              <div
                class="cross-btn position-absolute top-0 start-100 translate-middle"
                (click)="
                  onCheckboxClick(selectedTag.title, !selectedTag.isChecked);
                  checkDropdown(false)
                "
              >
                <i class="bi bi-x-circle-fill text-danger"></i>
              </div> </span
            >} } @if(!showDropdown){
            <span class="add-more color-primary" (click)="checkDropdown(true)"
              >click to add more</span
            >
            } </span
          >}
          <div
            class="dropdown-menu"
            (mouseleave)="checkDropdown(false)"
            [ngClass]="{ show: showDropdown }"
          >
            @for(tag of tagList; track tag; let i= $index){

            <div class="form-check-wrapper">
              <div
                class="form-check ms-2"
                (click)="onCheckboxClick(tag.title, !tag.isChecked)"
              >
                <input
                  class="form-check-input form-input"
                  type="checkbox"
                  [value]="tag.title"
                  [id]="'tagCheckbox' + i"
                  [checked]="tag.isChecked"
                />
                <label class="form-check-label my-1">
                  {{ tag.title }}
                </label>
              </div>
            </div>
            }
          </div>
        </div>

        @if (!addBlogForm.get('tags')?.valid &&
        addBlogForm.get('tags')?.touched){
        <div class="text-danger">tags error</div>
        }
      </div>

      <div class="col-12 mb-3">
        <label class="form-label">Banner Image</label>
        <div
          class="banner-image d-flex align-items-center justify-content-center"
          (drop)="dropHandler($event)"
          (dragover)="dragOver($event)"
        >
          <input
            class="form-control form-input"
            id="fileUpload"
            class="form-control form-input d-none"
            accept="image/jpeg,image/jpg,image/png"
            type="file"
            (change)="handleImageFileChange($event)"
          />
          <h5>Drop your image here,</h5>
          <label class="image-label" for="fileUpload"
            ><h5 class="color-primary">browse</h5></label
          >
        </div>
      </div>
      <div class="col-12 text-center mb-3">
        <span class="form-control bg-light text-muted"
          >Uploaded File:{{
            uploadedFileName ? uploadedFileName : "No file Uploaded."
          }}
        </span>
      </div>
      <div class="col mb-3">
        <label class="form-label">Blog Body</label>
        <input
          type="text"
          class="form-control form-input"
          formControlName="blogBody"
          (blur)="onTouched('blogBody')"
          [ngClass]="{
            'border-danger':
              !addBlogForm.get('blogBody')?.valid &&
              addBlogForm.get('blogBody')?.touched
          }"
        />
        @if (!addBlogForm.get('blogBody')?.valid &&
        addBlogForm.get('blogBody')?.touched){
        <div class="text-danger">blog Body error</div>
        }
      </div>
    </div>
    <div class="d-flex align-items-center justify-content-center">
      <button
        class="btn btn-submit btn-info me-1"
        type="submit"
        [disabled]="addBlogForm.invalid"
      >
        Submit
      </button>
      <button
        class="btn btn-cancel btn-outline-secondary ms-1"
        type="button"
        (click)="onCancel()"
      >
        Cancel
      </button>
    </div>
  </form>
</div>

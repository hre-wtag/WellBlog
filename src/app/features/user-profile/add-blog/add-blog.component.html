<div class="container bg-light px-5 py-4 my-4 border">
  <form [formGroup]="addBlogForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col mb-3">
        <label class="form-label">Title</label>
        <input
          type="text"
          class="form-control form-input"
          formControlName="title"
          (blur)="onTouched('title')"
          [ngClass]="{
            'border-danger':
              !addBlogForm.get('title')?.valid &&
              addBlogForm.get('title')?.touched
          }"
        />
        @if (!addBlogForm.get('title')?.valid &&
        addBlogForm.get('title')?.touched){
        <div class="text-danger">This field is required.</div>
        }
      </div>
      <div class="col mb-3">
        <label class="form-label">Tags</label>
        <div class="dropdown">
          <span
            class=""
            type="button"
            data-bs-toggle="dropdown"
            [attr.aria-expanded]="selectedTags.length > 0"
          >
            @if(selectedTags.length > 0){ @for(selectedTag of selectedTags;
            track selectedTag){<span
              class="selectedTag position-relative border m-1 p-1"
            >
              {{ selectedTag }}
              <span
                class="position-absolute top-0 start-100 translate-middle" (click)="removeSelectedTag(selectedTag)"
              >
              <i class="bi bi-x-circle-fill text-danger"></i>
              </span> </span
            >} } @else {
            <span>Select at least one tag</span>
            }
          </span>
          <ul class="dropdown-menu show">
            @for(tag of tagList; track tag; let i= $index){

            <div class="form-check-wrapper">
              <div class="form-check ms-2">
                <input
                  class="form-check-input form-input"
                  type="checkbox"
                  [value]="tag.title"
                  [id]="'tagCheckbox' + i"[checked]="tag.isChecked"
                  (click)="onCheckboxClick(tag.title,!tag.isChecked)"
                />
                <label class="form-check-label my-1">
                  {{ tag.title }}
                </label>
              </div>
            </div>
            }
          </ul>
        </div>

        @if (!addBlogForm.get('tags')?.valid &&
        addBlogForm.get('tags')?.touched){
        <div class="text-danger">tags error</div>
        }
      </div>

      <div class="col-12 mb-3">
        <label class="form-label">Banner Image</label>
        <div
          class="banner-image d-flex align-items-center justify-content-center"
        >
          <input
            class="form-control form-input"
            formControlName="fileUpload"
            id="fileUpload"
            class="form-control form-input d-none"
            accept="image/jpeg,image/jpg,image/png"
            type="file"
            (change)="handleImageFileChange($event)"
          />
          <h5>Drop your image here,</h5>
          <label class="image-label" for="fileUpload"
            ><h5 class="color-primary">browse</h5></label
          >
        </div>
      </div>
      <div class="col-12 text-center mb-3">
        <span class="form-control bg-light text-muted"
          >Uploaded File:{{
            uploadedFileName ? uploadedFileName : "No file Uploaded."
          }}
        </span>
      </div>
      <div class="col mb-3">
        <label class="form-label">Blog Body</label>
        <input
          type="text"
          class="form-control form-input"
          formControlName="blogBody"
          (blur)="onTouched('blogBody')"
          [ngClass]="{
            'border-danger':
              !addBlogForm.get('blogBody')?.valid &&
              addBlogForm.get('blogBody')?.touched
          }"
        />
        @if (!addBlogForm.get('blogBody')?.valid &&
        addBlogForm.get('blogBody')?.touched){
        <div class="text-danger">blog Body error</div>
        }
      </div>
    </div>
    <div class="d-flex align-items-center justify-content-center">
      <button
        class="btn btn-submit btn-info me-1"
        type="submit"
        [disabled]="addBlogForm.invalid"
      >
        Submit
      </button>
      <button
        class="btn btn-cancel btn-outline-secondary ms-1"
        type="button"
        (click)="onCancel()"
      >
        Cancel
      </button>
    </div>
  </form>
</div>
